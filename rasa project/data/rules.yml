version: "3.1"

rules:

- rule: greet
  steps:
  - intent: greet
  - action: action_utter_greet

- rule: bot challenge
  steps:
  - intent: bot_challenge
  - action: action_utter_imabot

- rule: out of scope
  steps:
  - intent: out_of_scope
  - action: action_utter_out_of_scope

- rule: pizza order
  steps:
  - intent: order
  - action: action_order

- rule: asking correct
  condition:
  - slot_was_set:
    - asking_correct: True
  steps:
  - intent: confirm
  - action: action_order_correct

- rule: asking incorrect
  condition:
  - slot_was_set:
    - asking_correct: True
  steps:
  - intent: deny
  - action: action_order_incorrect

- rule: asking anything else
  condition:
  - slot_was_set:
    - asking_anything_else: True
  steps:
  - intent: confirm
  - action: action_order

- rule: end order
  condition:
  - slot_was_set:
    - asking_anything_else: True
  steps:
  - intent: deny
  - action: action_confirm_order

- rule: change order
  steps:
  - intent: change_order
  - action: action_change_order

- rule: takeaway
  condition:
  - slot_was_set:
    - choosing_eating_place: True
  steps:
  - intent: takeaway
  - action: action_takeaway

- rule: delivery
  condition:
  - slot_was_set:
    - choosing_eating_place: True
  steps:
  - intent: delivery
  - action: action_delivery

- rule: table
  condition:
  - slot_was_set:
    - choosing_eating_place: True
  steps:
  - intent: table
  - action: action_table

- rule: ask address
  steps:
  - intent: ask_address
  - action: action_utter_address

- rule: ask opening hours
  steps:
  - intent: ask_opening_hours
  - action: action_utter_opening_hours

- rule: ask menu
  steps:
  - intent: ask_menu
  - action: action_utter_menu

- rule: ask affluence
  steps:
  - intent: ask_affluence
  - action: action_utter_affluence

- rule: ask allergies
  steps:
  - intent: ask_allergies
  - action: action_utter_allergies

- rule: tell time takeaway
  condition:
  - slot_was_set:
    - asking_time_takeaway: True
  steps:
  - intent: tell_time
  - action: action_takeaway

- rule: tell time delivery
  condition:
  - slot_was_set:
    - asking_time_delivery: True
  steps:
  - intent: tell_time
  - action: action_delivery

- rule: tell address
  condition:
  - slot_was_set:
    - asking_address: True
  steps:
  - intent: tell_address
  - action: action_delivery

- rule: say again 
  condition:
  - slot_was_set:
    - asking_correct: False
  steps:
  - intent: confirm
  - action: action_repeat_last_message

- rule: say again 2
  condition:
  - slot_was_set:
    - asking_correct: False
  steps:
  - intent: deny
  - action: action_repeat_last_message

- rule: say again 3
  condition:
  - slot_was_set:
    - asking_anything_else: False
  steps:
  - intent: confirm
  - action: action_repeat_last_message

- rule: say again 4
  condition:
  - slot_was_set:
    - asking_anything_else: False
  steps:
  - intent: deny
  - action: action_repeat_last_message

- rule: say again 5
  condition:
  - slot_was_set:
    - time
  steps:
  - intent: tell_time
  - action: action_repeat_last_message

- rule: say again 6
  condition:
  - slot_was_set:
    - choosing_eating_place: False
  steps:
  - intent: takeaway
  - action: action_repeat_last_message

- rule: say again 7
  condition:
  - slot_was_set:
    - choosing_eating_place: False
  steps:
  - intent: delivery
  - action: action_repeat_last_message

- rule: say again 8
  condition:
  - slot_was_set:
    - choosing_eating_place: False
  steps:
  - intent: table
  - action: action_repeat_last_message

- rule: say again 9
  condition:
  - slot_was_set:
    - asking_address: False
  steps:
  - intent: tell_address
  - action: action_repeat_last_message